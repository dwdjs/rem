{"version":3,"file":"index.min.js","sources":["../index.js"],"sourcesContent":["/**\n * flexible\n * @see https://github.com/amfe/lib-flexible\n * @param designWidth 设计师起稿宽度\n * @param pxPerRem 每个1rem多少px\n */\nexport default function flexible (designWidth = 750, pxPerRem = 100) {\n  var docEl = document.documentElement\n  var dpr = window.devicePixelRatio || 1\n\n  // adjust body font size\n  function setBodyFontSize () {\n    if (document.body) {\n      document.body.style.fontSize = (12 * dpr) + 'px'\n    }\n    else {\n      document.addEventListener('DOMContentLoaded', setBodyFontSize)\n    }\n  }\n  setBodyFontSize();\n\n  // set 1rem = viewWidth / (10)\n  function setRemUnit () {\n    var rem = docEl.clientWidth / (designWidth / pxPerRem)\n    docEl.style.fontSize = rem + 'px'\n  }\n\n  setRemUnit()\n\n  // reset rem unit on page resize\n  window.addEventListener('resize', setRemUnit)\n  window.addEventListener('pageshow', function (e) {\n    if (e.persisted) {\n      setRemUnit()\n    }\n  })\n\n  // detect 0.5px supports\n  if (dpr >= 2) {\n    var fakeBody = document.createElement('body')\n    var testElement = document.createElement('div')\n    testElement.style.border = '.5px solid transparent'\n    fakeBody.appendChild(testElement)\n    docEl.appendChild(fakeBody)\n    if (testElement.offsetHeight === 1) {\n      docEl.classList.add('hairlines')\n    }\n    docEl.removeChild(fakeBody)\n  }\n}\n"],"names":["designWidth","pxPerRem","docEl","document","documentElement","dpr","window","devicePixelRatio","setRemUnit","rem","clientWidth","style","fontSize","setBodyFontSize","body","addEventListener","e","persisted","fakeBody","createElement","testElement","border","appendChild","offsetHeight","classList","add","removeChild"],"mappings":"qMAMe,eAAmBA,yDAAc,IAAKC,yDAAW,IAC1DC,EAAQC,SAASC,gBACjBC,EAAMC,OAAOC,kBAAoB,WAc5BC,QACHC,EAAMP,EAAMQ,aAAeV,EAAcC,GAC7CC,EAAMS,MAAMC,SAAWH,EAAM,iBAbtBI,IACHV,SAASW,KACXX,SAASW,KAAKH,MAAMC,SAAY,GAAKP,EAAO,KAG5CF,SAASY,iBAAiB,mBAAoBF,GAGlDA,GAQAL,IAGAF,OAAOS,iBAAiB,SAAUP,GAClCF,OAAOS,iBAAiB,WAAY,SAAUC,GACxCA,EAAEC,WACJT,MAKAH,GAAO,EAAG,KACRa,EAAWf,SAASgB,cAAc,QAClCC,EAAcjB,SAASgB,cAAc,OACzCC,EAAYT,MAAMU,OAAS,yBAC3BH,EAASI,YAAYF,GACrBlB,EAAMoB,YAAYJ,GACe,IAA7BE,EAAYG,cACdrB,EAAMsB,UAAUC,IAAI,aAEtBvB,EAAMwB,YAAYR"}